/* TinyMCE 自定义样式 */

/* 编辑器容器样式 */
.tinymce-editor {
    width: 100%;
    min-height: 400px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    margin: 0;
    padding: 0;
}

/* TinyMCE 主容器 - 使用最高优先级 */
body .tox.tox-tinymce,
html body .tox.tox-tinymce,
.edit-form .tox.tox-tinymce {
    width: 100%;
    min-width: 100%;
    max-width: none;
    min-height: 400px;
    border: none;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    /* 确保编辑器可交互 */
    pointer-events: auto;
    user-select: text;
    /* 确保编辑器可见和可操作 */
    display: block;
    visibility: visible;
    opacity: 1;
    position: relative;
    z-index: 1;
    /* 强制覆盖可能的全局样式 */
    cursor: text;
    background: white;
    /* 确保充分利用空间 */
    margin: 0;
    padding: 0;
    /* 确保不被其他样式限制 */
    box-sizing: border-box;
    flex: 1;
}

/* 固定工具栏 + 可滚动编辑区布局 */
.tox.tox-tinymce.tinymce-fixed {
    display: flex;
    flex-direction: column;
    height: 600px; /* 可根据需要调整或用容器控制 */
}

.tox.tox-tinymce.tinymce-fixed .tox-toolbar__primary,
.tox.tox-tinymce.tinymce-fixed .tox-editor-header {
    flex: 0 0 auto;
    position: sticky;
    top: 0;
    z-index: 2;
}

.tox.tox-tinymce.tinymce-fixed .tox-edit-area {
    flex: 1 1 auto;
    overflow: auto;
}

.tox.tox-tinymce.tinymce-fixed .tox-edit-area__iframe {
    height: 100%;
}

/* 工具栏样式 - 使用最高优先级 */
body .tox .tox-toolbar,
html body .tox .tox-toolbar,
.edit-form .tox .tox-toolbar {
    background: #f8f9fa !important;
    border-bottom: 1px solid #e0e0e0 !important;
    border-radius: 8px 8px 0 0 !important;
    /* 确保工具栏可交互 */
    pointer-events: auto !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    cursor: default !important;
}

/* 编辑器编辑区域 - 使用最高优先级 */
body .tox .tox-edit-area,
html body .tox .tox-edit-area,
.edit-form .tox .tox-edit-area {
    width: 100% !important;
    min-width: 100% !important;
    max-width: none !important;
    height: calc(100% - 40px) !important;
    min-height: 550px !important;
    border: none !important;
    /* 确保编辑区域可见 */
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 2 !important;
    /* 确保充分利用空间 */
    margin: 0 !important;
    padding: 0 !important;
    /* 确保不被其他样式限制 */
    box-sizing: border-box !important;
    flex: 1 !important;
}

/* 编辑器iframe - 使用最高优先级 */
body .tox .tox-edit-area__iframe,
html body .tox .tox-edit-area__iframe,
.edit-form .tox .tox-edit-area__iframe {
    width: 100% !important;
    min-width: 100% !important;
    max-width: none !important;
    height: 100% !important;
    min-height: 550px !important;
    border: none !important;
    /* 确保iframe可见 */
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 3 !important;
    /* 确保充分利用空间 */
    margin: 0 !important;
    padding: 0 !important;
    /* 确保不被其他样式限制 */
    box-sizing: border-box !important;
    flex: 1 !important;
}

/* 编辑器内容样式 - 使用最高优先级 */
body .tox .tox-edit-area__iframe body,
html body .tox .tox-edit-area__iframe body,
.edit-form .tox .tox-edit-area__iframe body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
    font-size: 16px !important;
    line-height: 1.6 !important;
    padding: 20px !important;
    margin: 0 !important;
    color: #333 !important;
    /* 确保内容区域可编辑 */
    cursor: text !important;
    pointer-events: auto !important;
    user-select: text !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    /* 确保内容区域可见 */
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    background: white !important;
    min-height: 100% !important;
    height: auto !important;
    /* 强制设置contentEditable */
    -webkit-user-modify: read-write !important;
    -moz-user-modify: read-write !important;
    -ms-user-modify: read-write !important;
    user-modify: read-write !important;
    /* 确保内容不被隐藏 */
    overflow: visible !important;
    position: relative !important;
    z-index: 1 !important;
}

/* 隐藏状态栏 */
.tox .tox-statusbar {
    display: none !important;
}

/* 隐藏菜单栏 */
.tox .tox-menubar {
    display: none !important;
}

/* 按钮样式 - 使用最高优先级 */
body .tox .tox-tbtn,
html body .tox .tox-tbtn,
.edit-form .tox .tox-tbtn {
    border-radius: 4px !important;
    transition: all 0.2s ease !important;
    /* 确保按钮可点击 */
    pointer-events: auto !important;
    cursor: pointer !important;
    display: inline-block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

.tox .tox-tbtn:hover {
    background-color: #e9ecef !important;
    transform: translateY(-1px) !important;
}

.tox .tox-tbtn--enabled {
    background-color: #007bff !important;
    color: white !important;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .tinymce-editor {
        min-height: 500px !important;
        height: 500px !important;
    }
    
    .tox.tox-tinymce {
        min-height: 500px !important;
        height: 500px !important;
    }
    
    .tox .tox-edit-area,
    .tox .tox-edit-area__iframe {
        min-height: 450px !important;
    }
    
    .tox .tox-toolbar__group {
        flex-wrap: wrap !important;
    }
    
    .tox .tox-tbtn {
        margin: 2px !important;
    }
}

/* 确保编辑器在表单中正确显示 */
.form-group.full-width .tinymce-editor {
    width: 100% !important;
    max-width: none !important;
    min-height: 600px !important;
    height: 600px !important;
}

/* 覆盖全局textarea样式 */
.form-group.full-width textarea.tinymce-editor {
    min-height: 600px !important;
    height: 600px !important;
    width: 100% !important;
    max-width: none !important;
    resize: none !important;
}

/* 确保编辑表单容器充分利用空间 */
.edit-form {
    width: 100% !important;
    max-width: none !important;
    box-sizing: border-box !important;
}

/* 强制表单组充分利用宽度 - 最高优先级 */
.form-group.full-width,
.edit-form .form-group.full-width,
body .form-group.full-width,
html body .form-group.full-width {
    width: 100% !important;
    min-width: 100% !important;
    max-width: none !important;
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    display: block !important;
}

/* 编辑器加载状态 */
.tinymce-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 1000px;
    background: #f8f9fa;
    border: 2px dashed #dee2e6;
    border-radius: 8px;
    color: #6c757d;
}

.tinymce-loading .spinner {
    width: 40px;
    height: 40px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #007bff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: 15px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
} 

/* 确保编辑器完全可见 - 最高优先级 */
.tox.tox-tinymce {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 1000 !important;
    overflow: visible !important;
    min-height: 600px !important;
    height: 600px !important;
    width: 100% !important;
    max-width: none !important;
}

.tox .tox-edit-area {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 1001 !important;
    overflow: visible !important;
    height: calc(100% - 40px) !important;
}

.tox .tox-edit-area__iframe {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 1002 !important;
    overflow: visible !important;
    height: 100% !important;
    width: 100% !important;
}

/* 确保编辑器内容区域完全可见 */
.tox .tox-edit-area__iframe body {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 1003 !important;
    overflow: visible !important;
    background: white !important;
    color: #333 !important;
    min-height: 100% !important;
    height: auto !important;
    padding: 20px !important;
    margin: 0 !important;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
    font-size: 16px !important;
    line-height: 1.6 !important;
    cursor: text !important;
    pointer-events: auto !important;
    user-select: text !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    -webkit-user-modify: read-write !important;
    -moz-user-modify: read-write !important;
    -ms-user-modify: read-write !important;
    user-modify: read-write !important;
} 